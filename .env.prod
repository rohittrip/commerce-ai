# ============================================================================
# PRODUCTION ENVIRONMENT (GCP)
# ============================================================================
# This file contains configuration for the PRODUCTION environment on GCP
# All sensitive values should be stored in GCP Secret Manager

# ─────────────────────────────────────────────────────────────────────────────
# Environment
# ─────────────────────────────────────────────────────────────────────────────
NODE_ENV=production
DEBUG_MODE=false

# ─────────────────────────────────────────────────────────────────────────────
# PostgreSQL Database (Cloud SQL)
# ─────────────────────────────────────────────────────────────────────────────
# Java Services (JDBC format)
JDBC_DATABASE_URL=jdbc:postgresql://${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}
DATABASE_USER=${POSTGRES_USER}
DATABASE_PASSWORD=${POSTGRES_PASSWORD}

# Node.js Services
NODE_DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# Prisma ORM
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}?schema=public

# Cloud SQL Connection
# POSTGRES_HOST=<CLOUD_SQL_PRIVATE_IP>
# POSTGRES_PORT=5432
# POSTGRES_DB=commerce_ai_prod
# POSTGRES_USER=<service-account>
# POSTGRES_PASSWORD=<from-secret-manager>

# ─────────────────────────────────────────────────────────────────────────────
# MongoDB (MongoDB Atlas recommended for production)
# ─────────────────────────────────────────────────────────────────────────────
# For MongoDB Atlas with replica set
MONGODB_URI=mongodb+srv://${MONGO_USER}:${MONGO_PASSWORD}@${MONGO_CLUSTER}/${MONGO_DB}?retryWrites=true&w=majority

# MongoDB Connection Details
# MONGO_CLUSTER=<cluster-name>.mongodb.net
# MONGO_DB=commerce_ai_prod
# MONGO_USER=<mongo-user>
# MONGO_PASSWORD=<from-secret-manager>

# ─────────────────────────────────────────────────────────────────────────────
# Redis (Memorystore recommended for production)
# ─────────────────────────────────────────────────────────────────────────────
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}

# Redis Connection Details
# REDIS_HOST=<memorystore-private-ip>
# REDIS_PORT=6379

# ─────────────────────────────────────────────────────────────────────────────
# JWT Authentication (use strong secret from Secret Manager)
# ─────────────────────────────────────────────────────────────────────────────
JWT_SECRET=${JWT_SECRET}
JWT_EXPIRES_IN=1d

# ─────────────────────────────────────────────────────────────────────────────
# Server Ports (Cloud Run uses PORT env var)
# ─────────────────────────────────────────────────────────────────────────────
PORT=${PORT:-8080}

# ─────────────────────────────────────────────────────────────────────────────
# Internal Service URLs (Cloud Run service URLs)
# ─────────────────────────────────────────────────────────────────────────────
MCP_TOOL_SERVER_URL=${TOOL_SERVER_URL}
ORCHESTRATOR_URL=${ORCHESTRATOR_SERVICE_URL}
BFF_URL=${BFF_SERVICE_URL}

# Cloud Run Service URLs
# TOOL_SERVER_URL=https://tool-server-prod-xxxxx-uc.a.run.app
# ORCHESTRATOR_SERVICE_URL=https://orchestrator-prod-xxxxx-uc.a.run.app
# BFF_SERVICE_URL=https://bff-prod-xxxxx-uc.a.run.app

# ─────────────────────────────────────────────────────────────────────────────
# LLM Provider API Keys (MUST be from Secret Manager)
# ─────────────────────────────────────────────────────────────────────────────
OPENAI_API_KEY=${OPENAI_API_KEY}
ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
GOOGLE_API_KEY=${GOOGLE_API_KEY}

# ─────────────────────────────────────────────────────────────────────────────
# Frontend Configuration
# ─────────────────────────────────────────────────────────────────────────────
VITE_DEBUG_MODE=false
VITE_API_BASE_URL=${BFF_SERVICE_URL}
VITE_ORCHESTRATOR_URL=${ORCHESTRATOR_SERVICE_URL}

# ─────────────────────────────────────────────────────────────────────────────
# OTP Configuration (production settings)
# ─────────────────────────────────────────────────────────────────────────────
OTP_EXPIRES_IN_SEC=120
OTP_RESEND_AVAILABLE_IN_SEC=30
ACCESS_TOKEN_EXPIRES_IN_SEC=3600
REFRESH_TOKEN_EXPIRES_IN_SEC=2592000
# NO DUMMY_OTP in production

# ─────────────────────────────────────────────────────────────────────────────
# GCP Specific Configuration
# ─────────────────────────────────────────────────────────────────────────────
GCP_PROJECT_ID=${GCP_PROJECT_ID}
GCP_REGION=${GCP_REGION:-us-central1}

# ─────────────────────────────────────────────────────────────────────────────
# Logging & Monitoring
# ─────────────────────────────────────────────────────────────────────────────
LOG_LEVEL=warn
ENABLE_CLOUD_LOGGING=true

# ─────────────────────────────────────────────────────────────────────────────
# Security Settings
# ─────────────────────────────────────────────────────────────────────────────
CORS_ORIGINS=${ALLOWED_ORIGINS}
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_MS=60000
